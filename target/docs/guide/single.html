<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <title>Metridoc Core Plugin 0.54.4-SNAPSHOT</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />
        <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8" />
    <script type="text/javascript">
function addJsClass(el) {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
    </head>

    <body class="body" onload="addJsClass();">
        <div id="navigation">
            <ul>
                <li>
                    <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                        <a href="../guide/index.html" class="button">Table of contents</a>
                        <div id="nav-summary-childs" style="display:none;">
                            
                            <div class="toc-item" style="margin-left:0"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#gettingStarted"><strong>2</strong><span>Getting Started</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#configuration"><strong>3</strong><span>Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#metridocJobApi"><strong>4</strong><span>Job Api</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#metridocPlugins"><strong>5</strong><span>Metridoc Plugins</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#metridocSecurity"><strong>6</strong><span>Metridoc Security</span></a></div>
                            
                        </div>
                    </div>
                </li>
                <li class="separator selected">
                    <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
                </li>
            </ul>
        </div>
        <div id="header">
            <div class="images clearfix">
                
                
            </div>
            <p>
    Provides core functionality for metridoc and all related plugins
</p>
        </div>


        <table id="colset" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td id="col1">
                    <div id="main" class="corner-all">

                        <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                        <div class="project">
                            <h1>Metridoc Core Plugin - Reference Documentation</h1>
                            <p><strong>Authors:</strong> Thomas Barker</p>
                            <p><strong>Version:</strong> 0.54.4-SNAPSHOT</p>
                            
                        </div>

                        
                        <div id="table-of-content">
                            <h2>Table of Contents</h2>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#gettingStarted"><strong>2</strong><span>Getting Started</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#requiredSoftware"><strong>2.1</strong><span>Required Software</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#requiredExperience"><strong>2.2</strong><span>Required Experience</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#firstMetridocProject"><strong>2.3</strong><span>First MetriDoc Project</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#developingMetridoc"><strong>2.4</strong><span>Developing MetriDoc</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#upgradingMetridoc"><strong>2.5</strong><span>Upgrading MetriDoc</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#configuration"><strong>3</strong><span>Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#metridocJobApi"><strong>4</strong><span>Job Api</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#metridocPlugins"><strong>5</strong><span>Metridoc Plugins</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#availablePlugins"><strong>5.1</strong><span>Available Plugins</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#overridingPluginArtifacts"><strong>5.2</strong><span>Overriding Plugin Artifacts</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#writingYourOwnPlugin"><strong>5.3</strong><span>Writing Your Own Plugin</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#creatingJobs"><strong>5.4</strong><span>Creating and running jobs</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#metridocSecurity"><strong>6</strong><span>Metridoc Security</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#securityBasics"><strong>6.1</strong><span>Security Basics</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#securityConfiguration"><strong>6.2</strong><span>Security Configuration</span></a></div>
                            
                            <div style="clear:both" ></div>
                        </div>
                        
                        

<h1 id="introduction">1 Introduction</h1>
MetriDoc is an extendable platform to view and maintain library statistics and reports.
The platform is based on the web framework <a href="http://www.grails.org" target="blank">Grails</a> which provides
a simple web framework as well as a scripting engine that is well suited for various
jobs that need to to be run in MetriDoc to transport data from internal systems to
a central repository.  Problem spaces are split into <a href="http://www.grails.org" target="blank">Grails</a> plugins
to enhance the user experience as well as encourage community plugins.


<h1 id="gettingStarted">2 Getting Started</h1>



<h2 id="requiredSoftware">2.1 Required Software</h2>
<ul class="star">
<li><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="blank">Java 6 or above</a></li>
<li><a href="http://dist.springframework.org.s3.amazonaws.com/release/GRAILS/grails-2.0.4.zip" target="blank">Grails 2.1.1</a> (optional, see below)</li>
<li><a href="http://www.mysql.com/" target="blank">Mysql</a></li>
<li>Subversion</li>
<li>Text editor or IDE (IntelliJ, Eclipse or NetBeans)</li>
</ul><p class="paragraph"/>Grails is optional.  Every project we build uses the <a href="http://grails.org/doc/latest/guide/commandLine.html#wrapper" target="blank">grails wrapper</a>.
So for instance, if you are on a linux based system, simply run <code>./grailsw</code> instead of grails at the top of the project.
This allows you to use grails with only the jvm installed!<p class="paragraph"/>At some point it is likely that MetriDoc will use 100% GORM for object relational mapping.  Unfortunately we still have
some parts that rely on MySql.  This should change in the future.<p class="paragraph"/>Many package managers have grails.  For instance, if you are using a mac, try <a href="http://www.macports.org/" target="blank">MacPorts</a>
and do <code>sudo port install grails</code>.  For Ubuntu you can follow the instructions on the bottom of the Grails download
<a href="http://grails.org/Download/" target="blank">page</a><p class="paragraph"/>MetriDoc is developed in IntelliJ, and to a lesser extent Eclipse and vim.  Although IntelliJ is not free, it
is a very good IDE for Grails.  Education licenses for IntelliJ are very cheap.  You can find details for setting up
Grails in various IDE / Text editor environments <a href="http://grails.org/doc/latest/guide/gettingStarted.html#ide" target="blank">here</a>



<h2 id="requiredExperience">2.2 Required Experience</h2>
MetriDoc uses the web framework <a href="http://www.grails.org" target="blank">Grails</a>.  Grails is similar to the web framework ruby on rails framework,
but sits on top of the Groovy language.  Anyone with Java web experience, or experience in rapid development
environments such as Rails or Django should pick up Grails quickly.<p class="paragraph"/>Here are some Grails resources:
<ul class="star">
<li><a href="http://www.grails.org" target="blank">Grails Website</a></li>
<li><a href="http://ofps.oreilly.com/titles/9781449323936/index.html" target="blank">Free OFPS Oreily online book</a></li>
<li><a href="http://grails.org/doc/latest/" target="blank">Grails User Manual</a></li>
<li><a href="http://grails.org/Tutorials" target="blank">Tutorials</a></li>
<li><a href="http://www.manning.com/gsmith/" target="blank">Grails in Action</a></li>
</ul><p class="paragraph"/>


<h2 id="firstMetridocProject">2.3 First MetriDoc Project</h2>
MetriDoc is a collection of grails plugins.  Installing MetriDoc assumes you are using its core plugin and one or more
other MetriDoc plugins.  Generally users will create a central application that builds with other plugins that.  In the
future, a user will be able to deploy MetriDoc plugins as standalone applications that will link with already running
applications.<p class="paragraph"/><h3>Installing via Commandline</h3><p class="paragraph"/>First use grails to create a new project <code>grails create-app metridoc</code> and navigate to the directory (<code>cd metridoc</code>).
After which you will have a directory structure
similar to:<p class="paragraph"/><div class="code"><pre>├── application.properties
├── grails&#45;app
│   ├── conf
│   │   ├── ApplicationResources.groovy
│   │   ├── BootStrap.groovy
│   │   ├── BuildConfig.groovy
│   │   ├── Config.groovy
│   │   ├── DataSource.groovy
│   │   ├── UrlMappings.groovy
│   │   ├── hibernate
│   │   └── spring
│   │       └── resources.groovy
│   ├── controllers
...</pre></div><p class="paragraph"/>Update <code>BuildConfig.groovy</code> to include the metridoc-core dependency:<p class="paragraph"/><div class="code"><pre>plugins &#123;
        &#8230;
        compile(<span class="java&#45;quote<a href="metridoc&#45;core:0.54.4&#45;SNAPSHOT"</span>)">></a>
        &#8230;
&#125;</pre></div><p class="paragraph"/>Update the repository section so grails knows where to pick up the dependency<p class="paragraph"/><div class="code"><pre>repositories &#123;
        &#8230;
        mavenRepo <span class="java&#45;quote">"https://metridoc.googlecode.com/svn/maven/repository"</span>
        &#8230;
&#125;</pre></div><p class="paragraph"/><blockquote class="note">
The getting started scripts are part of the 0.54.4 snapshot.  Once this version is released, the release version can
be used instead.
</blockquote><p class="paragraph"/>Now run <code>grails -refresh-dependencies compile</code> so it can grab all the related dependencies<p class="paragraph"/>Finally run <code>grails configure-metridoc-application -includeSnapshots</code> to clean up and import various config files<p class="paragraph"/>To run your metridoc instance, please run <code>grails run-app</code><p class="paragraph"/>If all goes well, you should see this page:<p class="paragraph"/><img border="0" class="center" src="http://metridoc.googlecode.com/svn/trunk/metridoc-core/src/docs/images/MetriDocHome.png"></img><p class="paragraph"/><blockquote class="note">
if you get a <code>404</code> error about not finding index.gsp try running <code>grails clean</code> then <code>grails run-app</code>.  If that doesn't
work do <code>grails flush-cache</code> then <code>grails run-app</code>
</blockquote><p class="paragraph"/><blockquote class="note">
while building the application there might be a message saying that there is a corrupt cache.  If this happens, run
<code>grails --refresh-dependencies compile</code> and try <code>grails run-app</code> again
</blockquote><p class="paragraph"/>


<h2 id="developingMetridoc">2.4 Developing MetriDoc</h2>
If you are developing metridoc you will need to checkout MetriDoc trunk using subversion by running the command:<p class="paragraph"/><div class="code"><pre>svn co https://metridoc.googlecode.com/svn/trunk</pre></div><p class="paragraph"/>Many IDEs have version control support.  If you are using IntelliJ you can do <code>VCS -&#62; Checkout from Version Control -&#62; Subversion</code>.
Add the repository https://metridoc.googlecode.com/svn/trunk and follow the instructions.  By doing this, IntelliJ
will create a project structure for all the metridoc modules


<h2 id="upgradingMetridoc">2.5 Upgrading MetriDoc</h2>
There are two ways to upgrade the application.  Metridoc has a simple script to do this automatically<p class="paragraph"/><div class="code"><pre>grails update&#45;metridoc&#45;version</pre></div><p class="paragraph"/>If you want the latest snapshot, you can do <code>grails update-metridoc-version -includeSnapshots</code><p class="paragraph"/>If you would rather update the version of metridoc manually, open the <code>BuildConfig.groovy</code> file and change the version
in the plugins section<p class="paragraph"/>When upgrading grails, I would recommend <strong class="bold">NOT</strong> using <code>grails upgrade</code>.  <code>grails upgrade</code> does a bunch of magic, which
generally creates a ton of unwanted files and folders.  Instead, go to application.properties in your project and
change the <code>app.grails.version</code> property.<p class="paragraph"/><blockquote class="note">
Using a package manager for grails can help manage different versions of
grails easily instead of manually downloading grails.  <a href="http://gvmtool.net/" target="blank">gvm</a> is probably the best tool for this.
</blockquote><p class="paragraph"/><blockquote class="note">
If you are creating a plugin that someone else might use, consider using <code>grails wrapper</code>.  This command will create bat
and bash scripts that can force grails versions for a project build.  View the grails <a href="http://grails.org/doc/latest/guide/single.html#wrapper" target="blank">documentation</a>
for more information
</blockquote>


<h1 id="configuration">3 Configuration</h1>
<h3> Setting up the DataSource</h3><p class="paragraph"/>To setup data sources, edit the DataSources.groovy file located at grails-app/conf/DataSources.groovy.  At bare
minimum you will need a user name, password, database url and driver class name.  In general it is recommended that
you use MySql, going forward MetriDoc plugins will abstract database operations as much as possible so any database
supported by GORM can be used.  To the extent a plugin requires MySql, the documentation will indicate this.  The other
config files have already been put together for you when you created the project.<p class="paragraph"/>External configuration is also possible.  The file <code>~/.metridoc/MetridocConfig.groovy</code> is imported if it exists.  Any
values in there, including ones specifying the data source are applied to the running application.  You can see where
this file import at the top of the Config.groovy file:<p class="paragraph"/><div class="code"><pre>&#8230;
<span class="java&#45;keyword">if</span> (<span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"&#36;&#123;metridoc.home&#125;/MetridocConfig.groovy"</span>).exists()) &#123;
    log.info <span class="java&#45;quote">"found MetridocConfig.groovy, will add to configuration"</span>
&#125;
...</pre></div><p class="paragraph"/>Additionally, metridoc searches for any jars under <code>&#60;user home&#62;/.grails/drivers</code> and drops them into the classpath.
This can be really handy if you need to add database driver that are not accessible via maven.  The code for this
is at the top of the <code>Config.groovy</code> page and can be changed depending on your environment:<p class="paragraph"/><div class="code"><pre>&#8230;
<span class="java&#45;keyword">if</span> (driverDirectory.exists() &#38;&#38; driverDirectory.isDirectory()) &#123;
    <span class="java&#45;keyword">if</span> (rootLoader) &#123;
        driverDirectory.eachFile &#123;
            <span class="java&#45;keyword">if</span> (it.name.endsWith(<span class="java&#45;quote">".jar"</span>)) &#123;
                def url = it.toURI().toURL()
                LoggerFactory.getLogger(<span class="java&#45;quote">"config.Config"</span>).info <span class="java&#45;quote">"adding driver $&#123;url&#125;"</span> as <span class="java&#45;object">String</span>
                rootLoader.addURL(url)
            &#125;
        &#125;
    &#125;
&#125;
...</pre></div><p class="paragraph"/>



<h1 id="metridocJobApi">4 Job Api</h1>
The metridoc job api is essentially a collection of technologies that are ideal for job / task oriented workflows.
It tries to merge the simplicity of scripting and the maintainability of java by using straight groovy, Apache Camel and
its own pipeline workflow based on grails' build system.<p class="paragraph"/>A job can either be embedded and scheduled in a grails application, or it can be run via the command line and scheduled
through some other mechanism such as cron.  To create a job, first run <code>grails create-plugin &#60;plugin name&#62;</code>.
To add the metridoc libraries we need to add a couple lines to the BuildConfig.groovy file.  In the repositories section
put:<p class="paragraph"/><div class="code"><pre>repositories &#123;
    &#8230;
    grailsRepo <span class="java&#45;quote">"https://metridoc.googlecode.com/svn/plugins/"</span>
    &#8230;
&#125;</pre></div><p class="paragraph"/>In the plugins section put:<p class="paragraph"/><div class="code"><pre>plugins &#123;
    &#8230;
    compile(&#34;:metridoc&#45;core:0.52&#45;SNAPSHOT&#34;)
    &#8230;
&#125;</pre></div><p class="paragraph"/><blockquote class="note">
Do not add the dependency to the <code>dependency {...}</code> block.  You will get an error if you do this
</blockquote><p class="paragraph"/>After adding the necessary information to the BuildConfig.groovy file, run <code>grails compile</code> to download all the metridoc
libraries.<p class="paragraph"/>Grails creates a lot of files and folders.  If you just need to create a job
without a web application, you can run <code>grails configure-for-job-only</code>.  The script will remove all unnecessary files
and folders in addition to prompting for a job name.  After running the script, you will have an infrastructure to
create metridoc jobs without the clutter.  If you named the job <code>foo</code>, your file structure should look something like:<p class="paragraph"/><div class="code"><pre>|── FooGrailsPlugin.groovy
├── application.properties
├── grails&#45;app
│   ├── conf
│   │   ├── BuildConfig.groovy
│   │   ├── Config.groovy
│   │   ├── DataSource.groovy
│   │   └── UrlMappings.groovy
│   ├── i18n
│   │   └── shiro.properties
│   ├── jobs
│   │   └── foo
│   │       └── FooJob.groovy
│   └── migrations
├── target
├── test
│   ├── integration
│   └── unit
└── web&#45;app
    ├── META&#45;INF
    └── WEB&#45;INF
        ├── applicationContext.xml
        ├── sitemesh.xml
        └── tld
            ├── c.tld
            ├── fmt.tld
            ├── grails.tld
            └── spring.tld</pre></div><p class="paragraph"/>all information under <code>web-app</code> is grails specific.  Most everything you will work with is under the <code>jobs</code> and <code>config</code>
folders.  From this point forward, running <code>grails create-metridoc-job</code> will create new metridoc jobs that
extend the helper class MetridocJob, while running <code>create-job</code> will create a basic groovy job without the extra
metridoc functionality.<p class="paragraph"/>To schedule the job, create a static triggers field and add appropriate values as described <a href="http://grails-plugins.github.com/grails-quartz/guide/scheduling.html" target="blank">here</a>,
and implement doExecute(), or execute() depending on whether you are creating a MetridocJob or just a normal Grails Job<p class="paragraph"/><blockquote class="note">
The documentation is for the grails job plugin which depends on quartz 1.  MetriDoc actually uses the quartz2 grails plugin
which is more or less compatible with the quartz 1 version.  Just referencing the older one since the documentation
is a little better
</blockquote><p class="paragraph"/>While implementing doExecute you can enjoy the power of groovy, which has tools for sql, and structured text
parsing among other things.  In addition MetridJob provides a couple of helpful methods and workflows<p class="paragraph"/><h3>Targets</h3><p class="paragraph"/>A target is a unit of work that should only occur once.  It can depend on other targets as well to construct a pipeline
of work.  Generally a MetridocJob will be executed once to gather all targets, and then again to actually execute the
work.  Each job has a default target which will be called once the first pass through has happened.  Here is a simple
hello world job:<p class="paragraph"/><div class="code"><pre>class HelloWorldJob <span class="java&#45;keyword">extends</span> MetridocJob &#123;<p class="paragraph"/>    def doExecute() &#123;
        target(<span class="java&#45;keyword">default</span>: <span class="java&#45;quote">"say hello"</span>) &#123;
            log.info <span class="java&#45;quote">"hello world!"</span>
        &#125;
    &#125;
&#125;</pre></div><p class="paragraph"/>When executed, the job will run doExecute to collect all targets, then run the <code>default</code> target to print <code>hello world!</code>.
To build a pipeline, simply add multiple targets and use the <code>depends</code> method.  So consider this:<p class="paragraph"/><div class="code"><pre>class HelloWorldJob <span class="java&#45;keyword">extends</span> MetridocJob &#123;<p class="paragraph"/>    def doExecute() &#123;<p class="paragraph"/>        target(<span class="java&#45;keyword">default</span>: <span class="java&#45;quote">"say hello"</span>) &#123;
            depends(<span class="java&#45;quote">"runMeFirst"</span>)
            log.info <span class="java&#45;quote">"hello world!"</span>
        &#125;<p class="paragraph"/>        target(runMeFirst: <span class="java&#45;quote">"I run first!"</span>) &#123;
            log.info <span class="java&#45;quote">"running before saying hello"</span>
        &#125;
    &#125;
&#125;</pre></div><p class="paragraph"/>In this case runMeFirst logs before default does because of the depends method.  Now what happens if we do:<p class="paragraph"/><div class="code"><pre>class HelloWorldJob <span class="java&#45;keyword">extends</span> MetridocJob &#123;<p class="paragraph"/>    def doExecute() &#123;<p class="paragraph"/>        target(<span class="java&#45;keyword">default</span>: <span class="java&#45;quote">"say hello"</span>) &#123;
            depends(<span class="java&#45;quote">"runB"</span>, <span class="java&#45;quote">"runA"</span>)<p class="paragraph"/>        &#125;<p class="paragraph"/>        target(runA: <span class="java&#45;quote">"run A"</span>) &#123;
            log.info <span class="java&#45;quote">"running A"</span>
        &#125;<p class="paragraph"/>        target(runB: <span class="java&#45;quote">"run B"</span>) &#123;
            depends(<span class="java&#45;quote">"runA"</span>)
            log.info <span class="java&#45;quote">"running B"</span>
        &#125;
    &#125;
&#125;</pre></div><p class="paragraph"/>order of logging would be <code>runA -&#62; runB -&#62; default</code>.  Despite <code>default</code> depending on <code>runA</code>, since <code>runA</code> was already called
we will not call it again.  <code>depends</code> creates task dependencies while guarantying that none of them run more than once.
If you need to run a target regardless of whether it was ran before or not, do <code>targetMap.&#60;target name&#62;.call()</code>.  To
reuse targets across jobs you can store the targets in scripts and import them using <code>includeTargets</code>.<p class="paragraph"/><h3>Routing</h3><p class="paragraph"/>MetridocJob also provides a couple of routing features from Apache Camel.  To run a route, use
the <code>runRoute</code> method and everything contained within the passed closure will be the body of the configure method in
<a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/builder/RouteBuilder.html" target="blank">RouteBuilder</a>.
MetridocJob will create a CamelContext instance, add the route, and wait until all messages are
processed by the route.  Below are some examples<p class="paragraph"/><h4>Migrating a table to another table</h4><p class="paragraph"/>
<div class="code"><pre>class MigrationJob <span class="java&#45;keyword">extends</span> MetridocJob &#123;
    def doExecute() &#123;
        runRoute &#123;
            from(<span class="java&#45;quote">"sqlplus:tableA?dataSource=dataSourceA"</span>).to(<span class="java&#45;quote">"sqlplus:tableB?dataSource=dataSourceB"</span>)
        &#125;
    &#125;
&#125;</pre></div><p class="paragraph"/>dataSources or services will be available to the apache camel route.  Even any fields you set within MetridocJob.
For instance, say you want to consume some files from a directory, you can create a file filter as a field and use it<p class="paragraph"/><div class="code"><pre>class FileJob <span class="java&#45;keyword">extends</span> MetridocJob &#123;
    def fooFilter = &#91;
        accept: &#123;GenericFile file &#45;&#62;
            <span class="java&#45;keyword">return</span> file.fileName.contains(<span class="java&#45;quote">"foo"</span>)
        &#125;
    &#93;<p class="paragraph"/>    def doExecute() &#123;
        runRoute &#123;
            from(<span class="java&#45;quote">"file:/user/foo/files?filter=&#35;fooFilter"</span>).process&#123;Exchange exchange &#45;&#62;
                def fileName = excange.in.body.name
                log.info <span class="java&#45;quote">"processing file $fileName"</span>
            &#125;
        &#125;
    &#125;
&#125;</pre></div><p class="paragraph"/><h4>Metridoc additions to Apache Camel</h4><p class="paragraph"/>We added the <code>sqlplus</code> component to easily migrate data between tables.  The from part does a select * on the whatever
table is provided and transfers a <code>ResultSet</code> within the exchange.  The <code>to</code> component can accept a list of maps,
a ResultSet or just a map, and inserts the data into the destination table.<p class="paragraph"/>If you are using runRoute with a closure, there are a few additions to the Apache Camel DSL worth mentioning<p class="paragraph"/><strong class="bold">process</strong> - You can process an Exchange with a Closure instead of implementing a Processor<p class="paragraph"/><strong class="bold">filter</strong> - You can process a filter with a Closure instead of implementing a Predicate<p class="paragraph"/><strong class="bold">when</strong> - process a condition with a closure<p class="paragraph"/><strong class="bold">splitByLine</strong> - splits a text file by line<p class="paragraph"/><strong class="bold">aggregateByBody</strong> - aggregates the body of incoming exchanges into one exchange who has a list of all incoming exchanges
in its body<p class="paragraph"/>The javadoc for the extension is <a href="http://metridoc.googlecode.com/svn/trunk/metridoc-core/target/docs/gapi/metridoc/camel/CamelExtensions.html" target="blank">here</a><p class="paragraph"/>


<h1 id="metridocPlugins">5 Metridoc Plugins</h1>
MetriDoc is a collection of grails plugins that you can install depending on your needs.  To see what plugins
are available, simply run<p class="paragraph"/><div class="code"><pre>grails list&#45;plugins &#45;repository=metridocRepo</pre></div><p class="paragraph"/><blockquote class="note">
This assumes that you are using the starter project, otherwise you need to reference the code repository in your
BuildConfig.groovy file with the line
<div class="code"><pre>grailsRepo <span class="java&#45;quote">"https://metridoc.googlecode.com/svn/plugins/"</span>, <span class="java&#45;quote">"metridocRepo"</span></pre></div>
Please see <a href="http://metridoc.googlecode.com/svn/trunk/startup/metridoc/grails-app/conf/BuildConfig.groovy" target="blank">BuildConfig</a> for an example
</blockquote>


<h2 id="availablePlugins">5.1 Available Plugins</h2>
<ul class="star">
<li><a href="http://metridoc.googlecode.com/svn/trunk/metridoc-illiad/target/docs/index.html" target="blank">Illiad</a></li>
</ul><p class="paragraph"/>


<h2 id="overridingPluginArtifacts">5.2 Overriding Plugin Artifacts</h2>



<h2 id="writingYourOwnPlugin">5.3 Writing Your Own Plugin</h2>



<h2 id="creatingJobs">5.4 Creating and running jobs</h2>



<h1 id="metridocSecurity">6 Metridoc Security</h1>
Metridoc uses <a href="http://shiro.apache.org/" target="blank">Apache Shiro</a> for security.  Currently it is backed by a database, but future
versions of Metridoc will allow users to hook in their own security.  Out of the box, basic dashboards to manage users
and roles exist, as well as assigning roles to reports.


<h2 id="securityBasics">6.1 Security Basics</h2>



<h2 id="securityConfiguration">6.2 Security Configuration</h2>


                    </div>
                </td>
                <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">commandline</h1><div class="menu-sub">
                        
                        
                        <div class="menu-item"><a href="../ref/commandline/configure-for-job-only.html">configure-for-job-only</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/commandline/configure-for-metridoc-application.html">configure-for-metridoc-application</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/commandline/flush-cache.html">flush-cache</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/commandline/run-job.html">run-job</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/commandline/update-metridoc-version.html">update-metridoc-version</a>
                        </div>
                        
                        </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">taglibs</h1><div class="menu-sub">
                        
                        
                        </div>
                    </div>
                    
                </div>
            </div>
        </td>
            </tr>
        </table>

        <div id="footer">
            
            
        </div>



<script type="text/javascript" src="../js/docs.js"></script>

    </body>
</html>
